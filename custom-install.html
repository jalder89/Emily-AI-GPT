<!DOCTYPE html>
<html>
    <head>
        <title>Emily AI</title>
    </head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Emily AI is a Slack App that uses OpenAI's GPT-3 API to generate responses to messages in Slack.">
    <meta name="keywords" content="Emily AI, Slack, OpenAI, GPT-3, Express, Node, JavaScript">
    <meta name="author" content="Jessica Alder">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./css/styles.css" type="text/css">
    <body>
        <header>
            <nav>
                <a href="/" class="nav-button">Home</a>
                <a href="/register" class="nav-button">Register</a>
                <a href="/custom-install" class="nav-button">Custom Install</a>
            </nav>
        </header>
        <h1>Custom Installation</h1>
        <img src="assets/images/emily_ai_512.png" alt="Emily AI Image">
        <section>
            <h2>Installation</h2>
            <p>To host this app yourself you will need access to OpenAI API, a Slack App, a way to host the app, and a MongoDB database for hosting the AI's conversational memory. You can try out a non-production version of Emily AI by installing the development app <a href="https://www.emilyai.net">here</a>.</p>
            <p>To set things up, follow these steps (Mac):</p>
        
            <h3>Repository Setup</h3>
            <ol>
                <li>Clone the repo to your own directory: <code>git clone https://github.com/jalder89/Slack-Express-App-OpenAI.git</code></li>
                <li>Change into the new app directory</li>
                <li>Use terminal to install: <code>npm install</code></li>
            </ol>
        
            <h3>Slack App Setup</h3>
            <ol>
                <li>Grab the Slack App Manifest found <a href="https://gist.github.com/jalder89/0a806e5d56dd7055943f71e5b3c82f83">here</a></li>
                <li>Update the Request URL in the manifest to point to the URL where your app will be listening for Slack events or we'll cover ngrok forwarding in a bit</li>
                <li>Create a Slack App <a href="https://api.slack.com/apps">here</a></li>
                <li>Import using the updated manifest</li>
                <li>Install the Slack App to your workspace from the Basic Information tab</li>
                <li>Head to the OAuth & Permissions and copy the Bot Token</li>
            </ol>
        
            <h3>Environment Variables</h3>
            <p>Setting up environment variables will depend on how you are hosting the app. The following covers hosting locally via Ngrok.</p>
            <ol>
                <li>Create a <code>.env</code> file in your app's root directory and add the bot token: <code>SLACK_BOT_TOKEN="yourBotToken"</code></li>
                <li>Head back to the Slack App website and navigate to the Basic Info tab, copy the Signing Secret</li>
                <li>Back in your <code>.env</code> file, add the Signing Secret: <code>SLACK_SIGNING_SECRET="yourSigningSecret"</code></li>
                <li>You'll need to generate an OpenAI API key <a href="https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key">here</a></li>
                <li>Add your OpenAI API key to your <code>.env</code> file as well: <code>OPENAI_API_KEY="yourApiKey"</code></li>
            </ol>
        
            <h3>MongoDB Setup</h3>
            <ol>
                <li>Create and setup a MongoDB database for the AI memory, I used Atlas: <a href="https://www.mongodb.com/basics/mongodb-atlas-tutorial">MongoDB Atlas tutorial</a></li>
                <li>Get your database cluster Username and Password and add them to your <code>.env</code> file as <code>MONGO_USER</code> & <code>MONGO_PASSWORD</code></li>
                <li>Open your new cluster and click the Connect button and select Driver to view the connection string.</li>
                <li>Copy only the section of the URL between the @ and the first forwardslash / before the query parameters</li>
                <li>Add this string to your <code>.env</code> file as <code>MONGO_CLUSTER</code></li>
            </ol>
        
            <h3>Hosting Locally via Ngrok</h3>
            <ol>
                <li>Open a terminal to your app's root directory and start the app: <code>node app.js</code> or <code>npm start</code></li>
                <li>Open a second terminal and start ngrok: <code>ngrok http 3000</code></li>
                <li>Update the Event Request URL to your ngrok forwarding URL or host address, the included one is a placeholder that is already removed.</li>
            </ol>
        </section>        
    </body>
</html>